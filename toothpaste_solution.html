<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Bartlomiej Lukaszuk" />
  <title>Solution - Build SH*T with Julia</title>
  <link rel="stylesheet" href="./style.css"/>
    <script src="./mousetrap.min.js"></script>
    <style>
  @font-face {
    font-family: JuliaMono-Regular;
    src: url("./JuliaMono-Regular.woff2");
  }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
  <link rel="stylesheet" href="./github.min.css">
<script src="./highlight.min.js"></script>
<script src="./julia.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', (event) => {
    document.querySelectorAll('pre').forEach((el) => {
        if (!el.classList.contains('output')) {
            hljs.highlightElement(el);
        }
    });
});
</script>
 
</head>
<body>
<script>
function click_next() {
  var next = document.getElementById('nav-next');
  next.firstElementChild.nextElementSibling.click();
}
function click_prev() {
  var prev = document.getElementById('nav-prev');
  prev.firstElementChild.click();
}
Mousetrap.bind('right', click_next);
Mousetrap.bind('h', click_prev);
Mousetrap.bind('left', click_prev);
Mousetrap.bind('l', click_next);
</script>

<div class="books-container">
<aside class="books-menu">
<input type="checkbox" id="menu">
<label for="menu">☰</label>
<div class="books-title">
<a href="./">Build SH*T with Julia</a>
</div><br />
<span class="books-subtitle">

</span>
<div class="books-menu-content">
<li><a class="menu-level-1" href="./about.html"><b>1</b> About</a></li>
<li><a class="menu-level-1" href="./mat_multip.html"><b>2</b> Matrix Multiplication</a></li>
<li><a class="menu-level-2" href="./mat_multip_problem.html"><b>2.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./mat_multip_solution.html"><b>2.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./bat_and_ball.html"><b>3</b> Bat and Ball</a></li>
<li><a class="menu-level-2" href="./bat_and_ball_problem.html"><b>3.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./bat_and_ball_solution.html"><b>3.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./camel_case.html"><b>4</b> Camel case</a></li>
<li><a class="menu-level-2" href="./camel_case_problem.html"><b>4.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./camel_case_solution.html"><b>4.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./toothpaste.html"><b>5</b> Toothpaste</a></li>
<li><a class="menu-level-2" href="./toothpaste_problem.html"><b>5.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./toothpaste_solution.html"><b>5.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./bile.html"><b>6</b> Bile</a></li>
<li><a class="menu-level-2" href="./bile_problem.html"><b>6.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./bile_solution.html"><b>6.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./recursion.html"><b>7</b> Recursion</a></li>
<li><a class="menu-level-2" href="./recursion_problem.html"><b>7.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./recursion_solution.html"><b>7.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./progress_bar.html"><b>8</b> Progress Bar</a></li>
<li><a class="menu-level-2" href="./progress_bar_problem.html"><b>8.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./progress_bar_solution.html"><b>8.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./pascals_triangle.html"><b>9</b> Pascal’s triangle</a></li>
<li><a class="menu-level-2" href="./pascals_triangle_problem.html"><b>9.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./pascals_triangle_solution.html"><b>9.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./tree.html"><b>10</b> Tree</a></li>
<li><a class="menu-level-2" href="./tree_problem.html"><b>10.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./tree_solution.html"><b>10.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./roman_numerals.html"><b>11</b> Roman numerals</a></li>
<li><a class="menu-level-2" href="./roman_numerals_problem.html"><b>11.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./roman_numerals_solution.html"><b>11.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./cheque.html"><b>12</b> Cheque</a></li>
<li><a class="menu-level-2" href="./cheque_problem.html"><b>12.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./cheque_solution.html"><b>12.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./binary.html"><b>13</b> Binary</a></li>
<li><a class="menu-level-2" href="./binary_problem.html"><b>13.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./binary_solution.html"><b>13.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./leap_year.html"><b>14</b> Leap year</a></li>
<li><a class="menu-level-2" href="./leap_year_problem.html"><b>14.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./leap_year_solution.html"><b>14.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./calendar.html"><b>15</b> Calendar</a></li>
<li><a class="menu-level-2" href="./calendar_problem.html"><b>15.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./calendar_solution.html"><b>15.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./prime_numbers.html"><b>16</b> Prime Numbers</a></li>
<li><a class="menu-level-2" href="./prime_numbers_problem.html"><b>16.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./prime_numbers_solution.html"><b>16.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./tic_tac_toe.html"><b>17</b> Tic-tac-toe</a></li>
<li><a class="menu-level-2" href="./tic_tac_toe_problem.html"><b>17.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./tic_tac_toe_solution.html"><b>17.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./compound_interest.html"><b>18</b> Compound interest</a></li>
<li><a class="menu-level-2" href="./compound_interest_problem.html"><b>18.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./compound_interest_solution.html"><b>18.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./mortgage.html"><b>19</b> Mortgage</a></li>
<li><a class="menu-level-2" href="./mortgage_problem.html"><b>19.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./mortgage_solution.html"><b>19.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./overpayment.html"><b>20</b> Overpayment</a></li>
<li><a class="menu-level-2" href="./overpayment_problem.html"><b>20.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./overpayment_solution.html"><b>20.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./logo.html"><b>21</b> Logo</a></li>
<li><a class="menu-level-2" href="./logo_problem.html"><b>21.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./logo_solution.html"><b>21.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./lattice_paths.html"><b>22</b> Lattice Paths</a></li>
<li><a class="menu-level-2" href="./lattice_paths_problem.html"><b>22.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./lattice_paths_solution.html"><b>22.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./transcription.html"><b>23</b> Transcription</a></li>
<li><a class="menu-level-2" href="./transcription_problem.html"><b>23.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./transcription_solution.html"><b>23.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./translation.html"><b>24</b> Translation</a></li>
<li><a class="menu-level-2" href="./translation_problem.html"><b>24.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./translation_solution.html"><b>24.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./stem_and_leaf.html"><b>25</b> Stem and Leaf Plot</a></li>
<li><a class="menu-level-2" href="./stem_and_leaf_problem.html"><b>25.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./stem_and_leaf_solution.html"><b>25.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./altruism.html"><b>26</b> Altruism</a></li>
<li><a class="menu-level-2" href="./altruism_problem.html"><b>26.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./altruism_solution.html"><b>26.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./shift.html"><b>27</b> Shift</a></li>
<li><a class="menu-level-2" href="./shift_problem.html"><b>27.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./shift_solution.html"><b>27.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./caesar.html"><b>28</b> Caesar</a></li>
<li><a class="menu-level-2" href="./caesar_problem.html"><b>28.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./caesar_solution.html"><b>28.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./vigenere.html"><b>29</b> Vigenere</a></li>
<li><a class="menu-level-2" href="./vigenere_problem.html"><b>29.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./vigenere_solution.html"><b>29.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./the-end.html"><b>30</b> The end</a></li>
</div>
</aside>

<div class="books-content">
<h2 data-number="5.2" id="sec:toothpaste_solution"><span class="header-section-number">5.2</span> Solution</h2>
<p>First, let me define some abbreviations to use in the code later on.</p>
<pre><code>const Vec = Vector
const Flt = Float64</code></pre>
<p>Now, based on my own observations I would say that a <a href="https://en.wikipedia.org/wiki/Cylinder">cylinder</a> is a good approximation of the toothpaste that is squezed out of the tube. Time to define some helper functions that will help us to evaluate the amount of a toothpaste on a toothbrush.</p>
<pre class="language-julia"><code>struct Cylinder
    radius::Int
    height::Int
end

function getVolume(c::Cylinder)::Flt
    return c.height * pi * c.radius^2
end</code></pre>
<p>We will skip the detailed explanations, as the above are just translations of the Wikipedia’s formulas into Julia’s code.</p>
<p>There is a slight problem with the code above as one could argue that a cylinder mustn’t have any of its dimensions equal to or smaller than 0 (<code>Int</code> allows for such numbers). So we can either use an <a href="https://docs.julialang.org/en/v1/manual/integers-and-floating-point-numbers/">unsigned type</a> (like <code>UInt64</code>) or add a sanity check within a so called <a href="https://docs.julialang.org/en/v1/manual/constructors/#man-inner-constructor-methods">inner constructor</a>.</p>
<pre class="language-julia"><code>struct Cylinder
    radius::Int
    height::Int

    Cylinder(r::Int, h::Int) = (r &lt; 1 || h &lt; 1) ?
        error(&quot;both radius and height must be &gt;= 1&quot;) :
        new(r, h)
end</code></pre>
<p>Anyway, in order to answer how much the sales will increase we need to estimate the increase in our toothpaste’s usage when the radius and height of our cylinder changes.</p>
<pre class="language-julia"><code>function getRatios(cylinders::Vec{Cylinder},
                   radiusChange::Int, heightChange::Int)::Vec{Flt}
    ratios::Vec{Flt} = []
    for cyl1 in cylinders
        # newRadius, newHeight, cyl2, vol1, vol2 - local variables
        # visible only in the for loop
        newRadius = cyl1.radius + radiusChange
        newHeight = cyl1.height + heightChange
        cyl2 = Cylinder(newRadius, newHeight)
        vol1 = getVolume(cyl1)
        vol2 = getVolume(cyl2)
        push!(ratios, round(vol2/vol1, digits=2))
    end
    return ratios
end</code></pre>
<p>To that end we defined the <code>getRatios</code> function that accepts a vector of <code>cylinders</code> and the number by which we change their radiuses (<code>radiusChange</code>) and heights (<code>heightChange</code>). <code>for</code> each cylinder (<code>cyl1</code>) in the initial <code>cylinders</code> we create its counterpart <code>cyl2</code> with the applied size changes. Next, we obtain the volumes (<code>vol1</code> and <code>vol2</code>) for the two cylinders. All that’s left to do is to <code>push</code> the volume ratio (<code>vol2/vol1</code>) into the vector of results (<code>ratios</code>) and to <code>return</code> it from the function.</p>
<p>Time to test some scenarios.</p>
<h3 data-number="5.2.1" id="scenario-1"><span class="header-section-number">5.2.1</span> Scenario 1</h3>
<p>We increase the radius of the hole. We assume the change is so small that the customers wouldn’t notice (the height remains constant).</p>
<pre class="language-julia"><code># radius and height in millimeters
# radius+1, height = const
getRatios(Cylinder.(1:5, 5), 1, 0) .* 100</code></pre>
<pre class="output"><code>[400.0, 225.0, 178.0, 156.0, 144.0]</code></pre>
<blockquote>
<p><strong><em>Note:</em></strong> <code>Cylinder.(1:5, 5)</code> creates a vector of <code>Cylinder</code>s with different radii (1:5) and the same height (5). Moreover, we multiplied (<code>.*</code>) the obtained vector of ratios by 100 in order to obtain the change expressed in %.</p>
</blockquote>
<p>The data demonstrates that the smaller the initial hole the greater the increase in our toothpaste consumption and therefore the expected sales growth (here in the range of +300% to +44%).</p>
<h3 data-number="5.2.2" id="scenario-2"><span class="header-section-number">5.2.2</span> Scenario 2</h3>
<p>We increase the radius of the hole, and observe what happens with the consumption of our product if the customers try to squeeze less (shorter strip) of our toothpaste by the very same amount that we increased our radius.</p>
<pre class="language-julia"><code># radius and height in millimeters
# radius+1, height-1
getRatios(Cylinder.(1:5, 5), 1, -1) .* 100</code></pre>
<pre class="output"><code>[320.0, 180.0, 142.0, 125.0, 114.99999999999999]</code></pre>
<p>Again, we observe a significant growth (although smaller than in the previous scenario) in toothpaste consumption and expected sales (here in the range of +220% to +15%).</p>
<h3 data-number="5.2.3" id="scenario-3"><span class="header-section-number">5.2.3</span> Scenario 3</h3>
<p>We increase the radius of the hole, and observe what happens with the consumption of our product if the customers try to squeeze less of our toothpaste (they decrease the length of the strip by two units, when we changed the radius by one unit).</p>
<pre class="language-julia"><code># radius and height in millimeters
# radius+1, height-2
getRatios(Cylinder.(1:5, 5), 1, -2) .* 100</code></pre>
<pre class="output"><code>[240.0, 135.0, 107.0, 94.0, 86.0]</code></pre>
<p>This time the result is inconclusive, because in the two last cases the customers actually use less of our product, and therefore the sales are expected to drop.</p>
<h3 data-number="5.2.4" id="conclusions"><span class="header-section-number">5.2.4</span> Conclusions</h3>
<p>In summary, we see that increasing the radius of the whole in a toothpaste is an effective strategy to increase the sales of our product. However, we should restrain ourselves and not overdo it, since if the customers notice they may squeeze shorter toothpaste strips which may undermine our efforts (or even backfire on us).</p>


<div class="bottom-nav">
    <p id="nav-prev" style="text-align: left;">
        <a class="menu-level-2" href="./toothpaste_problem.html"><b>5.1</b> Problem</a> <kbd>←</kbd>
        <span id="nav-next" style="float: right;">
            <kbd>→</kbd> <a class="menu-level-1" href="./bile.html"><b>6</b> Bile</a>
        </span>
    </p>
</div>


<div class="license">
    <br/>
  <br/>
  <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
    Bartlomiej Lukaszuk
</div>
</div>
</div>
</body>
</html>