<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Bartlomiej Lukaszuk" />
  <title>Solution - Build SH*T with Julia</title>
  <link rel="stylesheet" href="./style.css"/>
    <script src="./mousetrap.min.js"></script>
    <style>
  @font-face {
    font-family: JuliaMono-Regular;
    src: url("./JuliaMono-Regular.woff2");
  }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
  <link rel="stylesheet" href="./github.min.css">
<script src="./highlight.min.js"></script>
<script src="./julia.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', (event) => {
    document.querySelectorAll('pre').forEach((el) => {
        if (!el.classList.contains('output')) {
            hljs.highlightElement(el);
        }
    });
});
</script>
 
</head>
<body>
<script>
function click_next() {
  var next = document.getElementById('nav-next');
  next.firstElementChild.nextElementSibling.click();
}
function click_prev() {
  var prev = document.getElementById('nav-prev');
  prev.firstElementChild.click();
}
Mousetrap.bind('right', click_next);
Mousetrap.bind('h', click_prev);
Mousetrap.bind('left', click_prev);
Mousetrap.bind('l', click_next);
</script>

<div class="books-container">
<aside class="books-menu">
<input type="checkbox" id="menu">
<label for="menu">☰</label>
<div class="books-title">
<a href="./">Build SH*T with Julia</a>
</div><br />
<span class="books-subtitle">

</span>
<div class="books-menu-content">
<li><a class="menu-level-1" href="./about.html"><b>1</b> About</a></li>
<li><a class="menu-level-1" href="./mat_multip.html"><b>2</b> Matrix Multiplication</a></li>
<li><a class="menu-level-2" href="./mat_multip_problem.html"><b>2.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./mat_multip_solution.html"><b>2.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./bat_and_ball.html"><b>3</b> Bat and Ball</a></li>
<li><a class="menu-level-2" href="./bat_and_ball_problem.html"><b>3.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./bat_and_ball_solution.html"><b>3.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./camel_case.html"><b>4</b> Camel case</a></li>
<li><a class="menu-level-2" href="./camel_case_problem.html"><b>4.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./camel_case_solution.html"><b>4.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./toothpaste.html"><b>5</b> Toothpaste</a></li>
<li><a class="menu-level-2" href="./toothpaste_problem.html"><b>5.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./toothpaste_solution.html"><b>5.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./bile.html"><b>6</b> Bile</a></li>
<li><a class="menu-level-2" href="./bile_problem.html"><b>6.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./bile_solution.html"><b>6.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./recursion.html"><b>7</b> Recursion</a></li>
<li><a class="menu-level-2" href="./recursion_problem.html"><b>7.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./recursion_solution.html"><b>7.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./progress_bar.html"><b>8</b> Progress Bar</a></li>
<li><a class="menu-level-2" href="./progress_bar_problem.html"><b>8.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./progress_bar_solution.html"><b>8.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./pascals_triangle.html"><b>9</b> Pascal’s triangle</a></li>
<li><a class="menu-level-2" href="./pascals_triangle_problem.html"><b>9.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./pascals_triangle_solution.html"><b>9.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./tree.html"><b>10</b> Tree</a></li>
<li><a class="menu-level-2" href="./tree_problem.html"><b>10.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./tree_solution.html"><b>10.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./roman_numerals.html"><b>11</b> Roman numerals</a></li>
<li><a class="menu-level-2" href="./roman_numerals_problem.html"><b>11.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./roman_numerals_solution.html"><b>11.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./cheque.html"><b>12</b> Cheque</a></li>
<li><a class="menu-level-2" href="./cheque_problem.html"><b>12.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./cheque_solution.html"><b>12.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./binary.html"><b>13</b> Binary</a></li>
<li><a class="menu-level-2" href="./binary_problem.html"><b>13.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./binary_solution.html"><b>13.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./leap_year.html"><b>14</b> Leap year</a></li>
<li><a class="menu-level-2" href="./leap_year_problem.html"><b>14.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./leap_year_solution.html"><b>14.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./calendar.html"><b>15</b> Calendar</a></li>
<li><a class="menu-level-2" href="./calendar_problem.html"><b>15.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./calendar_solution.html"><b>15.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./prime_numbers.html"><b>16</b> Prime Numbers</a></li>
<li><a class="menu-level-2" href="./prime_numbers_problem.html"><b>16.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./prime_numbers_solution.html"><b>16.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./tic_tac_toe.html"><b>17</b> Tic-tac-toe</a></li>
<li><a class="menu-level-2" href="./tic_tac_toe_problem.html"><b>17.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./tic_tac_toe_solution.html"><b>17.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./birthday.html"><b>18</b> Birthday</a></li>
<li><a class="menu-level-2" href="./birthday_problem.html"><b>18.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./birthday_solution.html"><b>18.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./compound_interest.html"><b>19</b> Compound interest</a></li>
<li><a class="menu-level-2" href="./compound_interest_problem.html"><b>19.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./compound_interest_solution.html"><b>19.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./mortgage.html"><b>20</b> Mortgage</a></li>
<li><a class="menu-level-2" href="./mortgage_problem.html"><b>20.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./mortgage_solution.html"><b>20.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./overpayment.html"><b>21</b> Overpayment</a></li>
<li><a class="menu-level-2" href="./overpayment_problem.html"><b>21.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./overpayment_solution.html"><b>21.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./logo.html"><b>22</b> Logo</a></li>
<li><a class="menu-level-2" href="./logo_problem.html"><b>22.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./logo_solution.html"><b>22.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./lattice_paths.html"><b>23</b> Lattice Paths</a></li>
<li><a class="menu-level-2" href="./lattice_paths_problem.html"><b>23.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./lattice_paths_solution.html"><b>23.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./transcription.html"><b>24</b> Transcription</a></li>
<li><a class="menu-level-2" href="./transcription_problem.html"><b>24.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./transcription_solution.html"><b>24.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./translation.html"><b>25</b> Translation</a></li>
<li><a class="menu-level-2" href="./translation_problem.html"><b>25.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./translation_solution.html"><b>25.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./stem_and_leaf.html"><b>26</b> Stem and Leaf Plot</a></li>
<li><a class="menu-level-2" href="./stem_and_leaf_problem.html"><b>26.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./stem_and_leaf_solution.html"><b>26.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./altruism.html"><b>27</b> Altruism</a></li>
<li><a class="menu-level-2" href="./altruism_problem.html"><b>27.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./altruism_solution.html"><b>27.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./shift.html"><b>28</b> Shift</a></li>
<li><a class="menu-level-2" href="./shift_problem.html"><b>28.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./shift_solution.html"><b>28.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./caesar.html"><b>29</b> Caesar</a></li>
<li><a class="menu-level-2" href="./caesar_problem.html"><b>29.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./caesar_solution.html"><b>29.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./vigenere.html"><b>30</b> Vigenere</a></li>
<li><a class="menu-level-2" href="./vigenere_problem.html"><b>30.1</b> Problem</a></li>
<li><a class="menu-level-2" href="./vigenere_solution.html"><b>30.2</b> Solution</a></li>
<li><a class="menu-level-1" href="./the-end.html"><b>31</b> The end</a></li>
</div>
</aside>

<div class="books-content">
<h2 data-number="18.2" id="sec:birthday_solution"><span class="header-section-number">18.2</span> Solution</h2>
<p>The following solution is based on a computer simulation and relies on a few assumptions, namely:</p>
<ol type="1">
<li>there are always exactly 365 days in a year (no country for leap years)</li>
<li>a person is equally likely to have been born on any day of a year (no seasonal, yearly and other patterns, etc.)</li>
<li>the birth date of one person does not influence the birth date of another person (not twins, siblings, etc.)</li>
</ol>
<p>None of the above is exactly true, still, those are some reasonable assumptions that will allow us to knack the problem.</p>
<p>OK, let’s begin.</p>
<pre class="language-julia"><code>import Random as Rnd

function getBdaysAtParty(nPeople::Int)::Vec{Int}
    @assert 3 &lt; nPeople &lt; 366 &quot;nPeople must be in range [4-365]&quot;
    return Rnd.rand(1:365, nPeople)
end

function getCounts(v::Vector{T})::Dict{T,Int} where T
    counts::Dict{T,Int} = Dict()
    for elt in v
        counts[elt] = get(counts, elt, 0) + 1
    end
    return counts
end</code></pre>
<p>We start by defining two simple functions. <code>getBdaysAtParty</code> returns a random set of birthdays (<code>Vec{Int}</code>) drawn from all the possible days in a year (<code>1:365</code>, with possible repetitions). On the other hand, <code>getCounts</code> is a function that I copied-pasted from <a href="https://b-lukaszuk.github.io/RJ_BS_eng/statistics_prob_theor_practice.html">my previous book</a>. It does what it promises, i.e. it returns a summary statistics (<code>counts</code>) that tells us how many times a given day in the birthdays (result of <code>getBdaysAtParty</code>) appears.</p>
<p>Time to find a way to determine does the event that we are looking for occured during the party.</p>
<pre class="language-julia"><code>function nSameBdays(counts::Dict{Int, Int}, n::Int=2)::Bool
    @assert 1 &lt; n &lt; 366 &quot;n must be in range [2-365]&quot;
    return isnothing(findfirst((&gt;=)(n), counts)) ? false : true
end

function anyMyBday(counts::Dict{Int, Int}, myBday::Int=1)::Bool
    @assert 0 &lt; myBday &lt; 366 &quot;myBDay must be in range [1-365]&quot;
    return haskey(counts, myBday)
end</code></pre>
<p>First, we check for <code>nSameBdays</code> with the build in <a href="https://docs.julialang.org/en/v1/base/arrays/#Base.findfirst-Tuple%7BFunction,%20Any%7D">findfirst</a>. That last function accepts a predicate and a collection (like a vector or a dictionary). The predicate is a function that takes an element of a collection (for a dictionary one of its values) as an input and returns a <code>Bool</code>. <code>findfirst</code> brings back the first index (for vectors) or the first key (for dictionaries) for which <code>predicate(vector's element)</code> or <code>predicate(dictionary's value)</code> is <code>true</code>, respectively. Often a predicate is just an <a href="https://docs.julialang.org/en/v1/manual/functions/#man-anonymous-functions">anonymous function</a>, which in our case could be <code>key -&gt; key &gt;= n</code>. Instead, here I used a <a href="https://bkamins.github.io/julialang/2024/02/23/fix.html">partial function application</a>. The <code>(&gt;=)(n)</code> is an equivalent of the <code>&gt;= n</code> mentioned in the previous sentence. It is just a function applied to one argument. The function still lacks an argument on its left site, just before the <code>&gt;</code>. This missing argument will be any element of our collection that is currently being tested. Anyway, one more point to notice, if <code>findfirst</code> finds no element for which the predicate is <code>true</code> then it returns <a href="https://docs.julialang.org/en/v1/base/constants/#Core.nothing">nothing</a>. Therefore, to get our final answer we send the possible result through <a href="https://docs.julialang.org/en/v1/base/base/#Base.isnothing">isnothing</a> and <a href="https://b-lukaszuk.github.io/RJ_BS_eng/julia_language_decision_making.html#sec:ternary_expression">a ternary expression</a> . Technically, we could have shorten the last line to <code>return !isnothing(firndfirst((&gt;=)(n), counts))</code> (or even without the return), but I thought that this might be too much condensation for a one line of code.</p>
<p>Our second function, <code>anyMyBday</code>, is much simpler. It just uses <code>haskey</code> to check if our day of birth occurred in the birthdays of the guests at our party (<code>counts</code>). Fun, fact, under our assumptions, it does not matter whether you were born on the first or 365th day of the year. Go ahead, change the default value to your actual day of birth and compare the result with the one provided later in this chapter.</p>
<p>OK, time to estimate the probability of success, i.e. the ratio between the number of times the event took place to the total trials (number of simulations).</p>
<pre class="language-julia"><code># isEventFn(Dict{Int, Int}) -&gt; Bool
function getProbSuccess(nPeople::Int, isEventFn::Function,
                        nSimulations::Int=100_000)::Flt
    @assert 3 &lt; nPeople &lt; 366 &quot;nPeople must be in range [4-365]&quot;
    @assert 1e4 &lt;= nSimulations &lt;= 1e6 &quot;nSimulations not in range [1e4-1e6]&quot;
    successes::Vec{Bool} = Vec{Bool}(undef, nSimulations)
    for i in 1:nSimulations
        peopleBdays = getBdaysAtParty(nPeople)
        counts = getCounts(peopleBdays)
        eventOccured = isEventFn(counts)
        successes[i] = eventOccured
    end
    return sum(successes)/nSimulations
end</code></pre>
<p>First, we initialize the vector that will hold the results of our simulations (<code>successes</code>). The <code>Vec{Bool}(undef, nSimulations)</code> creates a vector of size specified in <code>nSimulations</code> that is currently occupied by some unspecified (<code>undef</code> like undefined) values (basically garbage that is currently in a specific place of our computer’s memory). We will fill the <code>successes</code> with the values of interest in the for loop. For each simulation, we throw a party and get the guests’ birthdays (<code>peopleBdays</code>). We obtain <code>count</code>s for them and test did the event that we consider a success occurred that time (with <code>isEventFn</code>). We place the occurrence into the proper spot (<code>[i]</code>) of our vector of <code>successes</code>. Notice, that here <code>peopleBdays</code>, <code>counts</code>, and <code>eventOccured</code> are local (helper) variables that are visible only in the for loop. Anyway, all that’s left to do is to calculate the probability. The <code>sum</code> function treats any <code>true</code> as <code>1</code> and <code>false</code> as 0, hence it returns the number of successes, which we divide by the number of simulations.</p>
<p>Let’s see how it works.</p>
<pre class="language-julia"><code>Rnd.seed!(101)
peopleAtParty = 5:30
probsAnySameBdays = [getProbSuccess(n, nSameBdays) for n in peopleAtParty]
probsMyBday = [getProbSuccess(n, anyMyBday) for n in peopleAtParty]</code></pre>
<figure id="fig:birthday">
<img src="./images/birthday.png" alt="Figure 5: Birthday paradox probabilities." />
<figcaption aria-hidden="true">Figure 5: Birthday paradox probabilities.</figcaption>
</figure>
<p>So, with 23 people at a party the probability that any 2 of them have a birthday on the same day is roughly 50% or 0.5. The probability, that any person was born the same day that I have been born is around 8% or 0.08 for 30 people at a party. Actually, this last probability is fairly straightforward to calculate. For the reasons explained <a href="https://b-lukaszuk.github.io/RJ_BS_eng/statistics_intro_probability_properties.html">here</a> it is just <span class="math inline">\(\frac{1}{365}*{n\ people\ at\ party}\)</span> so our <a href="https://en.wikipedia.org/wiki/Mean_absolute_error">mean absolute error</a> is roughly equal to:</p>
<pre class="language-julia"><code>import Statistics as St

probsMyBdayTheor = (1/365) .* peopleAtParty
(probsMyBday .- probsMyBdayTheor) .|&gt; abs |&gt; St.mean</code></pre>
<p>0.0013415015806111702</p>
<p>which isn’t all that bad (we differ by a tenth part of a percent).</p>
<p>As a mini-exercise you may tweak the code a little and estimate the probability that any 3 people at a party were born on the same day.</p>


<div class="bottom-nav">
    <p id="nav-prev" style="text-align: left;">
        <a class="menu-level-2" href="./birthday_problem.html"><b>18.1</b> Problem</a> <kbd>←</kbd>
        <span id="nav-next" style="float: right;">
            <kbd>→</kbd> <a class="menu-level-1" href="./compound_interest.html"><b>19</b> Compound interest</a>
        </span>
    </p>
</div>


<div class="license">
    <br/>
  <br/>
  <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
    Bartlomiej Lukaszuk
</div>
</div>
</div>
</body>
</html>